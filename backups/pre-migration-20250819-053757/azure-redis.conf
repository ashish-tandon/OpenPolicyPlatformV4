# Azure Cache for Redis Configuration
# Optimized for Azure Cloud Environment

# ========================================
# AZURE SPECIFIC CONFIGURATION
# ========================================
# This configuration is optimized for Azure Cache for Redis
# Azure handles most of the infrastructure settings automatically

# ========================================
# NETWORK SETTINGS (Azure Managed)
# ========================================
# Port is managed by Azure (typically 6379 for non-SSL, 6380 for SSL)
# Bind and network access controlled by Azure

# ========================================
# MEMORY MANAGEMENT (Azure Optimized)
# ========================================
# Memory limits are managed by Azure based on SKU
# Basic SKU: 250MB, Standard: 1GB-53GB, Premium: 6GB-530GB
maxmemory-policy allkeys-lru              # Efficient memory management
maxmemory-samples 5                       # Better LRU accuracy

# ========================================
# SECURITY SETTINGS (Azure Enhanced)
# ========================================
# Authentication is handled by Azure
# TLS 1.2+ is enforced by Azure
# Network security groups control access

# ========================================
# PERFORMANCE OPTIMIZATION
# ========================================
# Database settings
databases 16                               # Optimal database count

# Persistence settings (Azure managed)
# Azure handles backup and persistence automatically
# RDB snapshots are managed by Azure

# ========================================
# AZURE INTEGRATION FEATURES
# ========================================
# Azure Application Insights integration
# Azure Monitor metrics
# Azure Key Vault integration for secrets

# ========================================
# CLIENT CONNECTION OPTIMIZATION
# ========================================
maxclients 256                            # Azure Basic SKU limit
client-output-buffer-limit normal 0 0 0   # No output buffer limits
client-output-buffer-limit replica 256mb 64mb 60
client-output-buffer-limit pubsub 32mb 8mb 60

# ========================================
# LOGGING AND MONITORING
# ========================================
loglevel notice                            # Log level
# Azure handles log collection and analysis

# ========================================
# SLOW LOG SETTINGS
# ========================================
slowlog-log-slower-than 10000             # Log commands slower than 10ms
slowlog-max-len 128                       # Maximum slow log entries

# ========================================
# LATENCY MONITORING
# ========================================
latency-monitor-threshold 100             # Monitor latencies > 100ms

# ========================================
# AZURE REDIS FEATURES
# ========================================
# Geo-replication (Premium SKU)
# Data persistence (Premium SKU)
# Virtual Network integration (Premium SKU)
# Azure Active Directory integration

# ========================================
# CONNECTION STRING FORMAT
# ========================================
# Non-SSL: openpolicy-redis.redis.cache.windows.net:6379,password=<key>
# SSL: openpolicy-redis.redis.cache.windows.net:6380,password=<key>,ssl=True

# ========================================
# AZURE MONITORING INTEGRATION
# ========================================
# Metrics available in Azure Monitor:
# - Connected Clients
# - Total Commands Processed
# - Cache Hits/Misses
# - Memory Usage
# - Network I/O
# - Server Load
